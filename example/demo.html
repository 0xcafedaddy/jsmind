<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>jsMind</title>
    <link type="text/css" rel="stylesheet" href="../style/jsmind.css" />
    <style type="text/css">
        body{
            background-color:#aaa;
        }
        #jsmind_container{
            width:1200px;
            height:650px;
            border:solid 1px #333;
            background:#eee;
        }
    </style>
</head>
<body>
<button onclick="load_jsmind();"> load ajax mind </button>
<button onclick="load_jsmind1();"> load mind #1 </button>
<button onclick="load_jsmind2();"> load mind #2 </button>
<button onclick="resize_container();"> resize container </button>
<button onclick="resize_jsmind();"> resize jsmind </button>
<button onclick="add_node();"> add node </button>
<button onclick="edit_node();"> edit node </button>
<button onclick="remove_node();"> remove node </button>
<button onclick="select_node();"> select node </button>
<button onclick="get_selected();"> get select </button>
<div id="jsmind_container" class="jsmind-container"></div>
<script type="text/javascript" src="../js/jsmind.js"></script>
<script type="text/javascript" src="../js/jsmind.data.js"></script>
<script type="text/javascript">

var mind_ajax = {url:'/example/data_example.json'};

var mind1 = [
    {nodeid:'a001', isroot:true, topic:'root node root node root node root node root node'},
    {nodeid:'b001', parentid:'a001', topic:'sub node #1', summary:'summary of node #1', sn:10 },
    {nodeid:'b002', parentid:'a001', topic:'sub node #2', summary:'summary of node #2'},
    {nodeid:'c0021', parentid:'b002', topic:'sub node #21', summary:'summary of node #2'},
    {nodeid:'c0022', parentid:'b002', topic:'sub node #22', summary:'summary of node #2'},
    {nodeid:'c0023', parentid:'b002', topic:'sub node #23', summary:'summary of node #2'},
    ];
var mind2 = [
    {nodeid:'a001', isroot:true, topic:'root node'},
    {nodeid:'b001', parentid:'a001', topic:'sub node #1', summary:'summary of node #1', sn:10 },
    {nodeid:'b002', parentid:'a001', topic:'sub node #2', summary:'summary of node #2'},
    {nodeid:'b003', parentid:'a001', topic:'sub node #3', summary:'summary of node #2'},
    ];

    var jm = new jsMind();
    jm.init();
    jm.set_readonly(false);
    //jm.data.removeNode('b001');
    // ==== OR =========================
    //  var jm = jsMind.show(mind,[myOptions]);


    function load_jsmind(){
        load_mind_ajax(mind_ajax,function(mind){
            jm.show(mind);
        });
    }

    function load_jsmind1(){
        jm.show(mind1);
    }

    function load_jsmind2(){
        jm.show(mind2);
    }

    function resize_container(){
        var c = document.getElementById('jsmind_container');
        c.style.width = '800px';
        c.style.height = '500px';
    }

    function resize_jsmind(){
        jm.resize();
    }

    function add_node(){
        var newNode = {nodeid:'b00X', parentid:'a001', topic:'sub node #X<button>hello</button>', summary:'summary of node #X'};
        var newNode1 = {nodeid:'b00Y', parentid:'a001', topic:'sub node #X', summary:'summary of node #X'};
        //jm.add_node(newNode);
        jm.add_node(newNode,'b002');
        //jm.data.add_node_at(newNode1,5);
        //var d = jm.data.get_json_string();
        //console.log(d);
    }

    function edit_node(){
        jm.update_node('b001','我被修改了','This is a Chinese test');
    }

    function remove_node(){
        jm.remove_node('b002');
    }

    function select_node(){
        jm.select_node('b002');
    }

    function get_selected(){
        var node = jm.get_selected_node();
        if(!!node){
            alert(node.id);
        }else{
            alert('nothing');
        }
    }

    load_jsmind1();
</script>
</body>
</html>
