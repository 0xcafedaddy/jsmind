<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>jsMind</title>
    <link type="text/css" rel="stylesheet" href="../style/jsmind.css" />
    <style type="text/css">
        body{
            background-color:#aaa;
        }
        #jsmind_container{
            width:1200px;
            height:650px;
            border:solid 1px #333;
            background:#eee;
        }
    </style>
</head>
<body>
<button onclick="load_jsmind1();"> mind #1 </button>
<button onclick="load_jsmind2();"> mind #2 </button>
<button onclick="load_jsmind();"> mind ajax </button>
<input type="file" onchange="load_jsmind3(event);"/>
<button onclick="resize_container();"> resize container </button>
<button onclick="resize_jsmind();"> resize jsmind </button>
<button onclick="add_node();"> add node </button>
<button onclick="edit_node();"> edit node </button>
<button onclick="remove_node();"> remove node </button>
<button onclick="select_node();"> select node </button>
<button onclick="get_selected();"> get select </button>
<button onclick="save_as();"> save as </button>
<div id="jsmind_container" class="jsmind-container"></div>
<script type="text/javascript" src="../js/jsmind.js"></script>
<script type="text/javascript" src="../js/jsmind.data.js"></script>
<script type="text/javascript">



    //var jm = new jsMind();
    //jm.init();//optional
    //jm.set_readonly(false);
    //jm.show();
    // ==== OR =========================
    var jm = jsMind.show();


    function load_jsmind(){
        var url = '/example/data_example.json';
        read_from_ajax(url,function(mind){
            jm.show(mind);
        });
    }

    function load_jsmind1(){
        var mind = [
            {nodeid:'a001', isroot:true, topic:'root node'},
            {nodeid:'b001', parentid:'a001', topic:'sub node #1', summary:'summary of node #1'},
            {nodeid:'b002', parentid:'a001', topic:'sub node #2', summary:'summary of node #2'},
            {nodeid:'c0021', parentid:'b002', topic:'sub node #21', summary:'summary of node #2'},
            {nodeid:'c0022', parentid:'b002', topic:'sub node #22', summary:'summary of node #2'},
            {nodeid:'c0023', parentid:'b002', topic:'sub node #23', summary:'summary of node #2'},
        ];
        jm.show(mind);
    }

    function load_jsmind2(){
        var mind = [
            {nodeid:'a001', isroot:true, topic:'root node root node root node root node root node'},
            {nodeid:'b001', parentid:'a001', topic:'sub node #1', summary:'summary of node #1'},
            {nodeid:'b002', parentid:'a001', topic:'sub node #2', summary:'summary of node #2'},
            {nodeid:'b003', parentid:'a001', topic:'sub node #3', summary:'summary of node #2'},
        ];
        jm.show(mind);
    }

    function load_jsmind3(evt){
        var files = evt.target.files;
        var file_data = files[0];
        read_from_localfile(file_data,function(mind){
            jm.show(mind);
        });
    }

    function resize_container(){
        var c = document.getElementById('jsmind_container');
        c.style.width = '800px';
        c.style.height = '500px';
    }

    function resize_jsmind(){
        jm.resize();
    }

    function add_node(){
        var newNode = {nodeid:'b00X', parentid:'a001', topic:'sub node #X<button>hello</button>', summary:'summary of node #X'};
        var newNode1 = {nodeid:'b00Y', parentid:'a001', topic:'sub node #X', summary:'summary of node #X'};
        //jm.add_node(newNode);
        jm.add_node(newNode,'b002');
        //jm.data.add_node_at(newNode1,5);
    }

    function edit_node(){
        jm.update_node('b001','我被修改了','This is a Chinese test');
    }

    function remove_node(){
        jm.remove_node('b002');
    }

    function select_node(){
        jm.select_node('b002');
    }

    function get_selected(){
        var node = jm.get_selected_node();
        if(!!node){
            alert(node.id);
        }else{
            alert('nothing');
        }
    }

    function save_as(){
        var mind = jm.get_mind();
        save_mind_localfile(null,mind);
    }

</script>
</body>
</html>
